{
  "_kolumn_file_discovery_comment": {
    "PURPOSE": "This JSON file demonstrates Kolumn's File Discovery System with interpolation",
    "USED_BY": "/examples/universal-file-processing.kl",
    "HOW_IT_WORKS": [
      "1. universal-file-processing.kl discovers this file with: discover 'kolumn_file' 'api_settings' { location = './config/api-settings.json' }",
      "2. Kolumn interpolates ${input.*} patterns with real values from the inputs block", 
      "3. Result is used to create an api_service resource with the interpolated JSON",
      "4. ${input.api_version} becomes 'v2', ${input.database_config} becomes actual DB config, etc."
    ]
  },
  "api": {
    "name": "kolumn-api",
    "version": "${input.api_version}",
    "description": "API service configured via Kolumn file discovery",
    "port": 8080,
    "host": "0.0.0.0"
  },
  "rate_limiting": {
    "enabled": true,
    "requests_per_minute": ${input.rate_limit},
    "burst_limit": 20,
    "key_generator": "ip_address"
  },
  "caching": {
    "enabled": true,
    "ttl_seconds": ${input.cache_ttl},
    "backend": "redis",
    "key_prefix": "kolumn-api"
  },
  "database": ${input.database_config},
  "logging": {
    "level": "info",
    "format": "json",
    "include_request_id": true,
    "include_user_id": true
  },
  "security": {
    "cors": {
      "enabled": true,
      "allowed_origins": ["*"],
      "allowed_methods": ["GET", "POST", "PUT", "DELETE"],
      "allowed_headers": ["Content-Type", "Authorization"]
    },
    "authentication": {
      "enabled": true,
      "type": "jwt",
      "secret_key": "${var.jwt_secret}",
      "token_expiry": "24h"
    }
  },
  "monitoring": {
    "metrics": {
      "enabled": true,
      "endpoint": "/metrics",
      "include_database": true,
      "include_redis": true
    },
    "health_check": {
      "enabled": true,
      "endpoint": "/health",
      "check_database": true,
      "check_external_services": true
    }
  },
  "features": {
    "user_management": true,
    "order_processing": true,
    "analytics": true,
    "export_data": true
  },
  "external_services": {
    "payment_gateway": {
      "url": "${var.payment_gateway_url}",
      "api_key": "${var.payment_api_key}",
      "timeout": "30s"
    },
    "notification_service": {
      "url": "${var.notification_service_url}",
      "timeout": "10s"
    }
  },
  "kolumn": {
    "managed": true,
    "file_discovery": true,
    "interpolated_at": "${var.current_timestamp}",
    "dependencies": [
      "database_config",
      "redis_config",
      "external_services"
    ]
  }
}